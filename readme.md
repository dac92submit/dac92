# Multi-HP Port Bandwidth Utilization Test on KV260

This repository contains a Vivado project and the corresponding Vitis project source code for testing multi-HP port bandwidth utilization on the KV260 platform.

## Project Structure

- **RTL Source Code**: The RTL source code is located at `kv260BandwidthTest/kv260BandwidthTest.srcs/sources_1/imports/EdgeLLM/BandwidthTest.v`.
- **Baremetal Test Program**: The baremetal test program is a modified hello-world project template, with the source code located at `vitisPrjSrc/helloworld.c`.

## Requirements

- **Hardware**: AMD/Xilinx KV260 Vision AI Starter Kit
- **Software**: Vitis 2022.2, Vivado 2022.2
- **Connections**: USB cable connected to the KV260 JTAG USB port

## Project Setup and Building Instructions

To build and run the project, follow these steps:

### 1. Open Vitis and Set Up Your Workspace

1. Launch **Vitis 2022.2** and set up a new workspace.
2. Connect the **USB cable** to the KV260 JTAG USB port.
3. Open a **serial terminal** on your computer with the appropriate settings to view the output (typically baud rate: 115200).

### 2. Create a New Application Project

1. Select **File > New > Application Project** to start the project wizard.
2. Enter a project name (e.g., `kv260_bandwidth_test`), then click **Next**.
3. Choose the platform file `kv260BandwidthTest/outstandingRBC.xsa` as the target hardware platform, then click **Next**.
4. Select **Hello World** as the template for the application project, then click **Finish**.

### 3. Import the Baremetal Test Program

1. In the Vitis workspace, open the `src/helloworld.c` file generated by the Hello World template.
2. Replace its content with the code from `vitisPrjSrc/helloworld.c` in this repository.

### 4. Build the Project

1. Click on **Project > Build All** to compile the project.
2. Ensure there are no build errors before proceeding.

### 5. Run the Project

1. In the **Run** menu, select **Run As > Launch on Hardware (Single Application)**.
2. Observe the serial terminal for output. The bandwidth utilization metrics will be displayed in real-time.

## Adjusting Test Parameters

To experiment with different bandwidth utilization metrics, modify the following parameters in `helloworld.c`:

- **`transfer_per_cmd`**: Adjust this parameter to set the number of transfers per command.
- **`page_size`**: Set this to different values for page size alignment. The values `1<<14` and `1<<13` are recommended for optimal column-aligned page size.

Changing these values will yield different bandwidth utilization results, which will be printed on the serial terminal.

---

**Note**: Ensure the project is recompiled and reloaded to the hardware after making parameter changes in `helloworld.c`.
